syntax = "proto3";
package nrm;
	
enum TARGETTYPE {
	SLICE = 0;
	SENSOR = 1;
	SCOPE = 2;
	ACTUATOR = 3;
}

enum MSGTYPE {
	ACK = 0;
	LIST = 1;
	ADD = 2;
	REMOVE = 3;
	EVENT = 4;
}

message Scope {
	string uuid = 1;
	repeated int32 cpus = 2;
	repeated int32 numas = 3;
	repeated int32 gpus = 4;
}

message Event {
	string uuid = 1;
	int64 time = 2;
	Scope scope = 3;
	double value = 4;
}

message Sensor {
	string name = 1;
	string uuid = 2;
}

message Slice {
	string name = 1;
	string uuid = 2;
}

message Actuator {
	string name = 1;
	string uuid = 2;
	double value = 3;
	repeated double choices = 4;
}

message ScopeList {
	repeated Scope scopes = 1;
}

message SensorList {
	repeated Sensor sensors = 1;
}

message SliceList {
	repeated Slice slices = 1;
}

message ActuatorList {
	repeated Actuator actuators = 1;
}

message Remove {
	TARGETTYPE type = 1;
	string uuid = 2;
}

message Add {
	TARGETTYPE type = 1;
	oneof data {
		Slice slice = 2;
		Sensor sensor = 3;
		Scope scope = 4;
		Actuator actuator = 5;
	}
}

message List {
	TARGETTYPE type = 1;
	oneof data {
		SliceList slices = 2;
		SensorList sensors = 3;
		ScopeList scopes = 4;
		ActuatorList actuators = 5;
	}
}

message Message {
	MSGTYPE type = 1;
	oneof data {
		List list = 2;
		Add add = 3;
		Remove remove = 4;
		Event event = 5;
	}
}
