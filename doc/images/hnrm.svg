<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.0//EN" "http://www.w3.org/TR/2001/PR-SVG-20010719/DTD/svg10.dtd">
<svg width="68cm" height="32cm" viewBox="60 149 1346 626" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <g id="Background">
    <g>
      <rect style="fill: #ffffff; fill-opacity: 1; stroke-opacity: 1; stroke-width: 2; stroke: #000000" x="480" y="300" width="240" height="54" rx="0" ry="0"/>
      <text font-size="12.8" style="fill: #000000; fill-opacity: 1; stroke: none;text-anchor:middle;font-family:sans-serif;font-style:normal;font-weight:normal" x="600" y="330.9">
        <tspan x="600" y="330.9">perfwrapper</tspan>
      </text>
    </g>
    <g>
      <rect style="fill: #ffffff; fill-opacity: 1; stroke-opacity: 1; stroke-width: 2; stroke: #000000" x="470" y="150" width="820" height="50" rx="0" ry="0"/>
      <text font-size="12.8" style="fill: #000000; fill-opacity: 1; stroke: none;text-anchor:middle;font-family:sans-serif;font-style:normal;font-weight:normal" x="880" y="178.9">
        <tspan x="880" y="178.9">nrmd</tspan>
      </text>
    </g>
    <g>
      <rect style="fill: #ffffff; fill-opacity: 1; stroke-opacity: 1; stroke-width: 2; stroke: #000000" x="480" y="440" width="240" height="54" rx="0" ry="0"/>
      <text font-size="12.8" style="fill: #000000; fill-opacity: 1; stroke: none;text-anchor:middle;font-family:sans-serif;font-style:normal;font-weight:normal" x="600" y="470.9">
        <tspan x="600" y="470.9">process</tspan>
      </text>
    </g>
    <g>
      <line style="fill: none; stroke-opacity: 1; stroke-width: 2; stroke: #000000" x1="600" y1="200" x2="600" y2="290.264"/>
      <polygon style="fill: #000000; fill-opacity: 1; stroke-opacity: 1; stroke-width: 2; stroke: #000000" fill-rule="evenodd" points="600,297.764 595,287.764 600,290.264 605,287.764 "/>
    </g>
    <g>
      <line style="fill: none; stroke-opacity: 1; stroke-width: 2; stroke: #000000" x1="600" y1="354" x2="600" y2="430.264"/>
      <polygon style="fill: #000000; fill-opacity: 1; stroke-opacity: 1; stroke-width: 2; stroke: #000000" fill-rule="evenodd" points="600,437.764 595,427.764 600,430.264 605,427.764 "/>
    </g>
    <text font-size="12.8" style="fill: #000000; fill-opacity: 1; stroke: none;text-anchor:start;font-family:sans-serif;font-style:normal;font-weight:normal" x="620" y="260">
      <tspan x="620" y="260">exec inside container, ENV: [LIBNRM_PROGRESS,</tspan>
      <tspan xml:space="preserve" x="620" y="276">                                             ContainerID,</tspan>
      <tspan xml:space="preserve" x="620" y="292">                                             CmdID]</tspan>
    </text>
    <text font-size="12.8" style="fill: #000000; fill-opacity: 1; stroke: none;text-anchor:start;font-family:sans-serif;font-style:normal;font-weight:normal" x="620" y="400">
      <tspan x="620" y="400">exec via linux perf, perhaps followed by the user code forking, ENV: full inherit</tspan>
    </text>
    <g>
      <polyline style="fill: none; stroke-opacity: 1; stroke-width: 2; stroke: #000000" points="720,327 1040,327 1040,209.736 "/>
      <polygon style="fill: #000000; fill-opacity: 1; stroke-opacity: 1; stroke-width: 2; stroke: #000000" fill-rule="evenodd" points="1040,202.236 1045,212.236 1040,209.736 1035,212.236 "/>
    </g>
    <text font-size="12.8" style="fill: #000000; fill-opacity: 1; stroke: none;text-anchor:start;font-family:sans-serif;font-style:normal;font-weight:normal" x="1060" y="260">
      <tspan x="1060" y="260">process sensor data.</tspan>
      <tspan x="1060" y="276">header contains: </tspan>
      <tspan x="1060" y="292">- CmdID</tspan>
    </text>
    <g>
      <polyline style="fill: none; stroke-opacity: 1; stroke-width: 2; stroke: #000000" points="720,747 1260,747 1260,209.736 "/>
      <polygon style="fill: #000000; fill-opacity: 1; stroke-opacity: 1; stroke-width: 2; stroke: #000000" fill-rule="evenodd" points="1260,202.236 1265,212.236 1260,209.736 1255,212.236 "/>
    </g>
    <text font-size="12.8" style="fill: #000000; fill-opacity: 1; stroke: none;text-anchor:start;font-family:sans-serif;font-style:normal;font-weight:normal" x="1280" y="260">
      <tspan x="1280" y="260">thread sensor data.</tspan>
      <tspan x="1280" y="276">header contains:</tspan>
      <tspan x="1280" y="292">- CmdID</tspan>
      <tspan x="1280" y="308">- ProcessID</tspan>
      <tspan x="1280" y="324">- TaskID</tspan>
      <tspan x="1280" y="340">- ThreadID</tspan>
      <tspan x="1280" y="356">- RankID</tspan>
    </text>
    <g>
      <rect style="fill: #ffffff; fill-opacity: 1; stroke-opacity: 1; stroke-width: 2; stroke: #000000" x="480" y="580" width="240" height="54" rx="0" ry="0"/>
      <text font-size="12.8" style="fill: #000000; fill-opacity: 1; stroke: none;text-anchor:middle;font-family:sans-serif;font-style:normal;font-weight:normal" x="600" y="610.9">
        <tspan x="600" y="610.9">process</tspan>
      </text>
    </g>
    <g>
      <line style="fill: none; stroke-opacity: 1; stroke-width: 2; stroke: #000000" x1="600" y1="494.988" x2="600" y2="570.264"/>
      <polygon style="fill: #000000; fill-opacity: 1; stroke-opacity: 1; stroke-width: 2; stroke: #000000" fill-rule="evenodd" points="600,577.764 595,567.764 600,570.264 605,567.764 "/>
    </g>
    <g>
      <line style="fill: none; stroke-opacity: 1; stroke-width: 2; stroke: #000000" x1="600" y1="634" x2="600" y2="710.264"/>
      <polygon style="fill: #000000; fill-opacity: 1; stroke-opacity: 1; stroke-width: 2; stroke: #000000" fill-rule="evenodd" points="600,717.764 595,707.764 600,710.264 605,707.764 "/>
    </g>
    <text font-size="12.8" style="fill: #000000; fill-opacity: 1; stroke: none;text-anchor:start;font-family:sans-serif;font-style:normal;font-weight:normal" x="620" y="540">
      <tspan x="620" y="540">optional: mpi_run. ENV: full inherit, MPI env vars added</tspan>
    </text>
    <text font-size="12.8" style="fill: #000000; fill-opacity: 1; stroke: none;text-anchor:start;font-family:sans-serif;font-style:normal;font-weight:normal" x="620" y="680">
      <tspan x="620" y="680">optional: OMP parallel section. ENV: full inherit</tspan>
    </text>
    <g>
      <rect style="fill: #ffffff; fill-opacity: 1; stroke-opacity: 1; stroke-width: 2; stroke: #000000" x="480" y="720" width="240" height="54" rx="0" ry="0"/>
      <text font-size="12.8" style="fill: #000000; fill-opacity: 1; stroke: none;text-anchor:middle;font-family:sans-serif;font-style:normal;font-weight:normal" x="600" y="750.9">
        <tspan x="600" y="750.9">thread</tspan>
      </text>
    </g>
    <text font-size="12.8" style="fill: #000000; fill-opacity: 1; stroke: none;text-anchor:start;font-family:sans-serif;font-style:normal;font-weight:normal" x="60" y="600">
      <tspan x="60" y="600">Knows:</tspan>
      <tspan x="60" y="616">- ProcessID (via libnrm: getpid)</tspan>
      <tspan x="60" y="632">- RankID (via libnrm: MPI env vars detected, MPI_Comm_rank)</tspan>
      <tspan x="60" y="648">- ThreadID=0 (via libnrm: omp_get_thread_num returns 0)</tspan>
    </text>
    <text font-size="12.8" style="fill: #000000; fill-opacity: 1; stroke: none;text-anchor:start;font-family:sans-serif;font-style:normal;font-weight:normal" x="60" y="720">
      <tspan x="60" y="720">Knows:</tspan>
      <tspan x="60" y="736">- ProcessID (via libnrm: getpid)</tspan>
      <tspan x="60" y="752">- RankID (via libnrm: MPI_Comm_rank or -1 if no MPI vars)</tspan>
      <tspan x="60" y="768">- TheadID (via libnrm: omp_get_thread_num) </tspan>
    </text>
    <text font-size="12.8" style="fill: #000000; fill-opacity: 1; stroke: none;text-anchor:start;font-family:sans-serif;font-style:normal;font-weight:normal" x="60" y="440">
      <tspan x="60" y="440">Knows:</tspan>
      <tspan x="60" y="456">- ProcessID (via libnrm: getpid)</tspan>
      <tspan x="60" y="472">- RankID=-1 (via libnrm: no MPI env vars exist )</tspan>
      <tspan x="60" y="488">- ThreadID=0 (via libnrm: omp_get_thread_num returns 0)</tspan>
    </text>
    <g>
      <line style="fill: none; stroke-opacity: 1; stroke-width: 2; stroke: #000000" x1="720" y1="460" x2="1250.26" y2="460"/>
      <polygon style="fill: #000000; fill-opacity: 1; stroke-opacity: 1; stroke-width: 2; stroke: #000000" fill-rule="evenodd" points="1257.76,460 1247.76,465 1250.26,460 1247.76,455 "/>
    </g>
    <g>
      <line style="fill: none; stroke-opacity: 1; stroke-width: 2; stroke: #000000" x1="720" y1="600" x2="1250.26" y2="600"/>
      <polygon style="fill: #000000; fill-opacity: 1; stroke-opacity: 1; stroke-width: 2; stroke: #000000" fill-rule="evenodd" points="1257.76,600 1247.76,605 1250.26,600 1247.76,595 "/>
    </g>
  </g>
</svg>
